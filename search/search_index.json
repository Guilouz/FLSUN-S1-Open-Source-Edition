{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"about/","title":"About","text":"<p>FLSUN-OS is an Open Source version for FLSUN S1 and FLSUN S1 Pro that uses the microSD port of the core board to boot on a new OS.</p> <p>This means that the Stock OS is not modified. It\u2019s a kind of dual boot, it's easy to go back to Stock OS but it can also be installed on eMMC memory.</p> <p>This new OS is based on  Debian 13 Trixie and is ready to use. It's more stable and has better performance. It has the advantage of having a support until June 2030 unlike Debian 10 (Stock OS) which expired in June 2024.</p> <p>Benchmark comparison between STOCK OS (Board flsun) and Open Source Edition OS based on Debian 12 (FLSUN-OS):  Geekbench.com</p> <p>What's included:</p> <ul> <li>Upgraded kernel a little faster and which gives access to the 1 GB of RAM (700 MB on Stock OS)</li> <li>Enabled ZRAM swap to add extra 512 MB of RAM</li> <li>SSH access</li> <li>Moonraker (latest build)</li> <li>Klipper (latest build with modifications for S1 support, repo is available  here)</li> <li>KlipperScreen (latest build with modifications for S1 support, repo is available  here)</li> <li>Mainsail (latest build)</li> <li>MJPG-Streamer (latest build)</li> <li>Kiauh (latest build)</li> <li>Pre-configured Web interfaces for Mainsail and Fluidd</li> <li>Improved Klipper configuration files (M600 support, Drying Box from Web interfaces support, etc...)</li> <li>Improved Power Loss Recovery</li> <li>Easy Installer feature to facilitate programs installation and some actions</li> <li>Enhanced Delta Calibration feature (more accurate and better detection of variations of the bed or in the mechanics of the printer, which can improve print quality)</li> <li>Bed Mesh Type before printing feature (Full Bed Mesh, Adaptive Bed Mesh or No Mesh)</li> <li>Adaptive Bed Heating feature (heated bed area depending on the model size)</li> <li>Moonraker Timelapse support</li> <li>Klipper Print Time Estimator support </li> <li>BigTreeTech MMB Cubic support (Chamber Temperature Sensor and Neopixels)</li> <li>BigTreeTech Smart Filament Sensor V2.0 support</li> </ul> <p>Note</p> <p>All AI features have been removed as they do not work as expected.Only Power Loss Recovery and XY Dimension Calibration features have been kept.</p> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"bed-settings/","title":"Bed Settings","text":""},{"location":"bed-settings/#improved-delta-calibration","title":"Improved Delta Calibration","text":"<p>Improved Delta Calibration function is a new introduced method. It is more accurate and with denser coverage that allows better detection of variations in the bed or printer mechanics, which can improve print quality.</p> <p>It's enabled by default but if you want to disable it, follow these steps:</p> <ul> <li> <p>Open <code>printer.cfg</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Search this line in <code>Bed Settings</code> section:</p> printer.cfg<pre><code>[delta_calibrate]\nradius: 154\nhorizontal_move_z: 10\nspeed: 100\nenhanced_method: True  # False -&gt; Use classic method | True -&gt; Use enhanced method\n</code></pre> </li> <li> <p>And replace the value to False:</p> printer.cfg<pre><code>[delta_calibrate]\nradius: 154\nhorizontal_move_z: 10\nspeed: 100\nenhanced_method: False  # False -&gt; Use classic method | True -&gt; Use enhanced method\n</code></pre> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> </ul>"},{"location":"bed-settings/#bed-mesh-settings","title":"Bed Mesh Settings","text":"<ul> <li> <p>First, make sure you have made the changes in your slicer by following  Slicers Settings section.</p> </li> <li> <p>It's possible to define the bed mesh type before starting a print among these 3 possibilities:</p> <ul> <li>FULL BED MESH \u2192 Performs a full bed mesh (saved as temporary mesh: <code>full_mesh</code>)</li> <li>ADAPTIVE MESH \u2192 Performs adaptive bed mesh based on model size (saved as temporary mesh: <code>adaptive_mesh</code>)</li> <li>NO MESH \u2192 No bed mesh is performed before printing (<code>default</code> mesh is used)</li> </ul> <p>Warning</p> <p>In case NO MESH is defined, it's important to have performed the printer calibrations to have a default mesh saved.</p> </li> <li> <p>It's accessible from the screen before starting a print:</p> <p></p> <p></p> </li> <li> <p>Or, you can define bed mesh type with <code>BED_MESH_SETTINGS</code> macro:</p> Mainsail Fluidd </li> </ul> <p>Note</p> <p>The Current Status shown is saved and loaded automatically when the printer starts.</p>"},{"location":"bed-settings/#bed-heating-settings","title":"Bed Heating Settings","text":"<ul> <li> <p>First, make sure you have made the changes in your slicer by following  Slicers Settings section.</p> </li> <li> <p>It's possible to enable/disable the adaptive bed heating feature before starting a print:</p> <ul> <li>YES \u2192 The areas of the bed are heated depending on the model size (by default)</li> <li>NO \u2192 All areas of the bed are always heated (useful for materials that require a fairly high chamber temperature)</li> </ul> </li> <li> <p>It's accessible from the screen before starting a print:</p> <p></p> <p></p> </li> <li> <p>Or, you can define bed mesh type with <code>BED_HEATING_SETTINGS</code> macro:</p> Mainsail Fluidd </li> </ul> <p>Note</p> <p>The Current Status shown is saved and loaded automatically when the printer starts.</p>"},{"location":"bed-settings/#troubleshootings","title":"Troubleshootings","text":"<p>In case you have <code>Probe samples exceed samples_tolerance</code> message when probing:</p> <ul> <li> <p>First, try this:</p> <p> </p> </li> <li> <p>You can also try to increase samples_tolerance value:</p> </li> <li> <p>Open <code>printer.cfg</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Search this line in <code>Probe Settings</code> section and increase this value:</p> printer.cfg<pre><code>[probe]\npin: !PD4\nx_offset: 0\ny_offset: 0\nz_offset: -0.25\nspeed: 10\nsamples: 3\nsamples_result: average\nsample_retract_dist: 5\nsamples_tolerance: 0.08\nsamples_tolerance_retries: 7\n</code></pre> <p>Warning</p> <p>Increasing this value too much may decrease accuracy.</p> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"bigtreetech-mmb-cubic/","title":"BigTreeTech MMB Cubic","text":"<p>The BigTreeTech MMB Cubic is the ideal solution for fitting additional interfaces onto your printer, allowing you to connect more things like, Neopixels, temperature sensors, etc...</p> <p>Here we will see the addition of Neopixels and a chamber temperature sensor.</p> <p></p>"},{"location":"bigtreetech-mmb-cubic/#interface-diagram","title":"Interface Diagram","text":""},{"location":"bigtreetech-mmb-cubic/#prerequisites","title":"Prerequisites","text":"<ul> <li>BigTreeTech MMB Cubic:  Biqu</li> <li>2 x 18 AWG (minimum) silicone electrical wire to power the BigTreeTech MMB Cubic</li> <li>1 x USB-C cable</li> <li>MMB Cubic Mount to print:  MMB_Cubic_Mount.stl</li> <li>4 x M3x8 screws to fix MMB Cubic to mount</li> <li>Double-sided tape to secure the mount in the lower part of the printer</li> <li>WS2812B - 5V LED strip (to replace existing LED strips)</li> <li>1 x NTC 100k Thermistor Temperature Sensor (I use the one from FLSUN V400 because it has the advantage of having a long cable)</li> </ul>"},{"location":"bigtreetech-mmb-cubic/#wiring","title":"Wiring","text":"<p>Note</p> <p>BigTreeTech MMB Cubic can be powered over USB but I don't recommend this for better performance.</p>"},{"location":"bigtreetech-mmb-cubic/#compiling-firmware","title":"Compiling Firmware","text":"<ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following commands (one at a time):</p> <p></p>SSH Command Prompt<pre><code>cd ~/klipper/\n</code></pre> SSH Command Prompt<pre><code>make menuconfig\n</code></pre><p></p> </li> <li> <p>Move on the menu with the \u2191 and \u2193 keys of your keyboard and validate the selected item with the Enter key and select these settings:</p> <p></p> </li> <li> <p>Then on your keyboard press the Q key then Y to save configuration.</p> </li> <li> <p>Enter the following commands (one at a time) to compile firmware:</p> <p></p>SSH Command Prompt<pre><code>make clean\n</code></pre> SSH Command Prompt<pre><code>make\n</code></pre><p></p> </li> <li> <p>When make is completed, the required klipper.bin firmware will be generated in the <code>home/pi/klipper/out</code> folder.</p> </li> </ul>"},{"location":"bigtreetech-mmb-cubic/#flash-firmware","title":"Flash Firmware","text":"<ul> <li> <p>If BigTreeTech MMB Cubic is already connected via USB-C, unplug it.</p> </li> <li> <p>Hold down the <code>BOOT</code> button and connect BigTreeTech MMB Cubic to printer with a USB-C cable. This allows the chip to enter DFU mode:</p> <p></p> </li> <li> <p>In the SSH command prompt window, enter the following command to query the DFU device ID (it should be named Raspberry Pi RP2 Boot):</p> SSH Command Prompt<pre><code>lsusb\n</code></pre> <p></p> </li> <li> <p>Enter the following commands (one at a time) to flash firmware by replacing <code>xxxx:xxxx</code> with the actual device ID obtained in the previous step:</p> <p></p>SSH Command Prompt<pre><code>cd ~/klipper/\n</code></pre> SSH Command Prompt<pre><code>make flash FLASH_DEVICE=xxxx:xxxx\n</code></pre><p></p> <p>Example</p> SSH Command Prompt<pre><code>make flash FLASH_DEVICE=2e8a:0003\n</code></pre> </li> <li> <p>After flashing, enter the following command to query the device Serial ID:</p> SSH Command Prompt<pre><code>ls /dev/serial/by-id/\n</code></pre> <p></p> </li> <li> <p>Copy the Serial ID it will be used later for the configuration file.</p> </li> </ul> <p>Note</p> <p>There is no need to manually press the BOOT button to enter DFU mode for subsequent updates after the first flashing is completed. To update BigTreeTech MMB Cubic firmware just use this command by replacing xxxxx` by your Serial ID: </p>SSH Command Prompt<pre><code>make flash FLASH_DEVICE=/dev/serial/by-id/usb-Klipper_rp2040_xxxxx\n</code></pre> <p></p> <p>Example</p> SSH Command Prompt<pre><code>make flash FLASH_DEVICE=/dev/serial/by-id/usb-Klipper_rp2040_5044340310A8901C-if00\n</code></pre>"},{"location":"bigtreetech-mmb-cubic/#configuration","title":"Configuration","text":"<p>MMB Cubic can be configured automatically with  Easy Installer or with Printer Setup Wizard from KlipperScreen or Web interface (see  Update and Configure Printer section) but if you need to configure it manually follow these steps.</p> <ul> <li> <p>Open <code>config.cfg</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Edit the <code>Configurations</code> section:</p> config.cfg<pre><code>#######################################################\n# BigTreeTech MMB Cubic Configuration\n#######################################################\n\n# If you use BigTreeTech MMB Cubic -&gt; Enable this lines and set the serial\n# ------------------------------------------------------------------------\n\n#[mcu MMB_Cubic]\n#serial: /dev/serial/by-id/usb-Klipper_rp2040_xxxxx\n\n\n# If you use Chamber Temperature Sensor with BigTreeTech MMB Cubic -&gt; Enable 'temp-sensor-mmb-cubic.cfg'\n# ------------------------------------------------------------------------------------------------------\n\n#[include Configurations/temp-sensor-mmb-cubic.cfg]\n\n\n# If you use Neopixels with BigTreeTech MMB Cubic -&gt; Disable 'led-stock.cfg' and Enable 'led-mmb-cubic.cfg'\n# ---------------------------------------------------------------------------------------------------------\n\n[include Configurations/led-stock.cfg]\n#[include Configurations/led-mmb-cubic.cfg]\n</code></pre> <ul> <li>Edit the serial parameter by replacing xxxxx` with your previously obtained serial ID.</li> </ul> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> <li> <p>Open <code>led-mmb-cubic.cfg</code> file in <code>Configurations</code> folder and edit the chain_count parameter by the number of LEDs your strips contain:</p> led-mmb-cubic.cfg<pre><code>[neopixel chamber_led]\npin: MMB_Cubic:gpio9\nchain_count: 20\ncolor_order: GRB\ninitial_RED: 1.0\ninitial_GREEN: 1.0\ninitial_BLUE: 1.0\n</code></pre> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> <li> <p>You should see the MMB Cubic MCU connected in the system information:</p> Mainsail Fluidd </li> <li> <p>You can now control Neopixels from screen in <code>Configurations</code> \u2192 <code>LED</code> menu:</p> <p></p> <p></p> </li> <li> <p>If you use chamber temperature sensor, you can see the temperature here:</p> <p></p> </li> </ul>"},{"location":"bigtreetech-mmb-cubic/#update-mcu-firmware","title":"Update MCU firmware","text":"<p>Note</p> <p>MCUs have limited write cycles. Updating the firmware with each Klipper release could shorten the life of your MCU! When is it necessary to update MCU firmware? Every time Klipper mentions to update the MCU at startup, no more.</p> <p>To update to a future MCU firmware of your MMB Cubic, follow these steps:</p> <ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 3 for Extras menu \u2192 3 for Update MMB Cubic MCU firmware \u2192 Enter to confirm your choice:</p> <p></p> </li> <li> <p>Klipper firmware will be builded and flashed.</p> </li> <li> <p>When it's done, Turn the printer off and on.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"camera-settings-control/","title":"Camera Settings Control","text":"<p>Camera Settings Control allows you to configure settings like Brightness, Contrast, Saturation, etc... with macros. It can be configured automatically with  Easy Installer or with Printer Setup Wizard from KlipperScreen or Web interface (see  Update and Configure Printer section) but if you need to configure it manually follow these steps.</p> <ul> <li> <p>Open <code>config.cfg</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Remove the first <code>#</code> symbol at the following line:</p> config.cfg<pre><code>#######################################################\n# Camera Settings Configuration\n#######################################################\n\n# If you want to control Camera settings -&gt; Enable 'camera-control.cfg'\n# ---------------------------------------------------------------------\n\n#[include Configurations/camera-control.cfg]\n</code></pre> </li> <li> <p>Click on <code>SAVE &amp; RESTART</code> at the top right to save the file.</p> </li> <li> <p>You can now control camera settings with macros:</p> Mainsail Fluidd <ul> <li>CAM SETTINGS \u2192 Displays the current camera settings in the console</li> <li>CAM RESTORE SETTINGS \u2192 Restores the camera to default settings </li> </ul> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"camera-settings-control/#default-settings","title":"Default Settings:","text":"<ul> <li>Brightness \u2192 0 (Min: -64 | Max: 64)</li> <li>Contrast \u2192 0 (Min: 0 | Max: 95)</li> <li>Saturation \u2192 56 (Min: 0 | Max: 100)</li> <li>Hue \u2192 0 (Min: -2000 | Max: 2000)</li> <li>White Balance Auto \u2192 1 (Disabled: 0 | Enabled: 1)</li> <li>Gamma \u2192 100 (Min: 100 | Max: 300)</li> <li>Gain \u2192 28 (Min: 0 | Max: 128)</li> <li>Power Line Frequency \u2192 1 (Disabled: 0 | 50Hz: 1 | 60Hz: 2)</li> <li>White Balance Temperature \u2192 4600 (Min: 2800 | Max: 6500)</li> <li>Sharpness \u2192 2 (Min: 0 | Max: 7)</li> <li>Backlight Compensation \u2192 0 (Min: 0 | Max: 1)</li> <li>Exposure Auto \u2192 3 (Manual Mode=1 | Aperture Priority Mode=3)</li> <li>Exposure Absolute \u2192 166 (Min: 3 | Max: 2047)</li> </ul>"},{"location":"changelogs/","title":"Changelogs","text":""},{"location":"changelogs/#flsun-os-30","title":"FLSUN OS - 3.0","text":"<p>Important</p> <p>This build is a new OS version and must be reinstalled!</p> <ul> <li>Upgraded OS to new  Debian 13 Trixie and Python 3.13 (gain is mainly in memory management and +5-10% on responsiveness).</li> <li>Updated KlipperScreen:<ul> <li>Add caching for icons, pixbufs and keyboard widgets. This significantly improves the fluidity and loading of panels.</li> <li>Fixed Shutdown/Reboot buttons which did not work.</li> </ul> </li> <li>Updated Easy Installer:<ul> <li>Removed Restore SSH access for Stock OS function since SSH access is now available in the latest Stock firmware.</li> </ul> </li> <li>Updated Moonraker, Klipper and KlipperScreen environments with Python 3.13.</li> <li>Improved Klipper configurations files.</li> <li>Contains all current up-to-date builds and configuration files.</li> </ul>"},{"location":"changelogs/#flsun-os-202","title":"FLSUN OS - 2.0.2","text":"<p>Note</p> <p>To update to this version, just update <code>FLSUN-OS-Dependencies</code> in Update Manager.</p> <ul> <li>Updated motherboard configuration for firmware compilation.</li> <li>Updated Moonraker, Klipper and KlipperScreen environments.</li> </ul>"},{"location":"changelogs/#flsun-os-201","title":"FLSUN OS - 2.0.1","text":"<p>Note</p> <p>To update to this version, just update <code>FLSUN-OS-Dependencies</code> in Update Manager.</p> <ul> <li>Updated motherboard configuration for firmware compilation.</li> <li>Updated KlipperScreen:<ul> <li>Added interactive top bar icons during heating.</li> <li>Added possibility to lock screen during printing (in shortcuts bar).</li> <li>Moved <code>LED</code> function to shortcuts bar.</li> </ul> </li> <li>Updated Moonraker, Klipper and KlipperScreen environments.</li> </ul>"},{"location":"changelogs/#flsun-os-20","title":"FLSUN OS - 2.0","text":"<p>Important</p> <p>This new OS version must be reinstalled! In the future, it will no longer be necessary to reinstall the OS to update to a new OS version.</p> <ul> <li>Upgraded Kernel to v6.1.99 a little faster and which now gives access to the 1 GB of RAM (700 MB on Stock OS).</li> <li>Enabled ZRAM swap to add extra 512 MB ram for safety.</li> <li>Introduced FLSUN OS Dependencies that can be updated via Update Manager to avoid having to reinstall the OS each time:<ul> <li>Allows you to update system files.</li> <li>Allows you to update Easy Installer with new changes.</li> <li>Automatically checks configuration files and notifies you if a new update is available (when updating Klipper).</li> </ul> </li> <li>Improved Easy Installer:<ul> <li>Added an <code>Update</code> menu for all update features.</li> <li>Reworked <code>Update Klipper Configuration Files</code> feature. It now only updates files that need to be updated.</li> <li>It is now possible to configure the printer at any time without needing to download the configuration files.</li> </ul> </li> <li>Updated Klipper configuration files:<ul> <li>Added new <code>PRINTER_SETUP_WIZARD</code> macro to configure your printer from Web interface.</li> <li>Added new <code>UPDATE_CONFIGURATION_FILES</code> macro to update Klipper configuration files from Web interface.</li> <li>Fixed issue with <code>Adapted Bed Heating</code> feature not working properly.</li> <li>Fixed issue with <code>Adapted Bed Heating</code> feature when first layer has different temperature than other layers.</li> <li>Necessary End Gcodes are now correctly applied when printing is canceled.</li> <li>Added wait for current moves to finish before restarting Klipper during calibrations.</li> <li>Added new macros for updates features.</li> <li>Improved logic of some macros.</li> <li>Updated Moonraker configurations for FLSUN OS Dependencies.</li> </ul> </li> <li>Updated KlipperScreen:<ul> <li>Reorganization of menus.</li> <li>Removed calibration warning on <code>Print Panel</code> which sometimes created false positives.</li> <li>Added new panel with QR Code to directly access the Wiki on <code>System Panel</code>.</li> <li>Added possibility to update Klipper configuration files on <code>Updates Panel</code>.</li> <li>Added possibility to configure your printer on <code>System Panel</code>.</li> <li>Improved <code>Jobs Status Panel</code>.</li> <li>Improved <code>LED Panel</code>.</li> <li>Improved <code>Fine Tune Panel</code>.</li> </ul> </li> <li>Updated Moonraker and KlipperScreen environments.</li> <li>Updated Wiki for this new OS.</li> </ul>"},{"location":"changelogs/#flsun-os-151","title":"FLSUN OS - 1.5.1","text":"<p>Important</p> <p>This new OS version must be reinstalled, it can't be updated with <code>easy-installer</code> command in SSH. Klipper and KlipperScreen have been updated accordingly and all configurations that could be downloaded with older OS versions are deprecated and have been removed. You also need to flash the motherboard with the new firmware. See  Flash Motherboard Firmware section.</p> <ul> <li>Klipper Configuration files are now unified, one set of configurations for all variants.</li> <li>Added support for BigTreeTech Smart Filament Sensor V2.0.</li> <li>Added support for Katapult bootloader. This allows to update future Klipper firmware without microSD card or STM32 Programmer.</li> <li>Added support for Klipper Print Time Estimator. After uploading a Gcode, a post-process on it is immediately performed prior to metadata extraction according to the printer settings.</li> <li>Added new feature to enable/disable Adaptive Bed Heating with <code>BED_HEATING_SETTINGS</code> macro or from KlipperScreen. See  Bed Heating Settings section.</li> <li>Reworked the logic of bed heating:<ul> <li>M140 S<code>&lt;temperature&gt;</code> \u2192 Set Inner and Outer beds temperature</li> <li>M140 S<code>&lt;temperature&gt;</code> B0 \u2192 Set Inner bed temperature</li> <li>M140 S<code>&lt;temperature&gt;</code> B1 \u2192 Set Outer bed temperature</li> <li>M190 S<code>&lt;temperature&gt;</code> \u2192 Set Inner and Outer beds temperature and wait</li> <li>M190 S<code>&lt;temperature&gt;</code> B0 \u2192 Set Inner bed temperature and wait</li> <li>M190 S<code>&lt;temperature&gt;</code> B1 \u2192 Set Outer bed temperature and wait</li> </ul> </li> <li>Updated Easy Installer:<ul> <li>Added possibility to update motherboard MCU firmware.</li> <li>Added possibility to update BigTreeTech MMB Cubic MCU firmware.</li> <li>You can now download the latest Klipper configuration files and configure the desired features.</li> </ul> </li> <li>Improved Power Loss detection.</li> <li>Fixed Chamber LED state after OFF/ON switch when brightness was changed from KlipperScreen or Web interface. Now the previous state is correctly restored.</li> <li>Fixed Neopixel LED state after OFF/ON switch when color was changed from KlipperScreen or Web interface. Now the previous state is correctly restored.</li> <li>Minor fixes.</li> </ul>"},{"location":"changelogs/#flsun-os-14","title":"FLSUN OS - 1.4","text":"<ul> <li>Added in-image security with bootloader core board: In case the eMMC is corrupted or unbootable, booting via microSD is still possible.</li> <li>Now possible to install FLSUN OS on eMMC. See  Install FLSUN OS on eMMC section.</li> <li> <p>Added possibility to Unload Filament with Purge or Retraction with new macros. KlipperScreen has also been updated for this.</p> <p></p> </li> </ul> <p>You can update configuration files with <code>easy-installer</code> command in SSH but for more security it's necessary to install this new image.</p>"},{"location":"changelogs/#flsun-os-13","title":"FLSUN OS - 1.3","text":"<ul> <li>The system is now shutdown properly when the printer is powered off.</li> <li>Reworked Power Loss Recovery. It now resumes exactly where it left off and it also preserves all settings like filament used, chamber fan speed, extrude mode, speed factor, extrude factor and all velocity parameters. Klipper has also been updated for this.</li> <li>Improved Bed Mesh with <code>zero_reference_position</code> parameter.</li> <li>Added support for Chamber LED brightness control in KlipperScreen.</li> <li>Macros now respect current configuration settings.</li> <li>Improved Gcode Offsets to apply them to Endstops. KlipperScreen has also been updated for this.</li> <li>Improved Bed Mesh with <code>zero_reference_position</code> parameter.</li> <li>Improved <code>SET_GCODE_OFFSET</code> macro.</li> <li>Improved <code>RESUME</code> macro: Shutdown fan for heating.</li> <li>Set default PID Hotend Calibration temperature to reasonable 250\u00b0C.</li> <li>Changes default extruder curent to 0.8.</li> <li>Updated KlipperScreen environment.</li> </ul> <p>You can update configuration files for fixes with <code>easy-installer</code> command in SSH. Environment is updated automatically when KlipperScreen is updated with Update Manager.</p>"},{"location":"changelogs/#flsun-os-122","title":"FLSUN OS - 1.2.2","text":"<ul> <li>Fixed issue with error message <code>dict object has no attribute max_power</code> when resuming.</li> </ul> <p>You can update configuration files for fixes with <code>easy-installer</code> command in SSH.</p>"},{"location":"changelogs/#flsun-os-121","title":"FLSUN OS - 1.2.1","text":"<ul> <li>Fixed issue with error message <code>This macro cannot be used while printing!</code>.</li> <li><code>SET_TMC_CURRENT</code> command now integrated in macros. It's no longer necessary to add it in the slicer Start Gcode.</li> </ul> <p>You can update configuration files for fixes with <code>easy-installer</code> command in SSH.</p>"},{"location":"changelogs/#flsun-os-12","title":"FLSUN OS - 1.2","text":"<ul> <li>Added Easy Installer to facilitate installations and some actions with the simple <code>easy-installer</code> command in SSH:<ul> <li>Install/Update/Remove Spoolman (Filament Spools Management).</li> <li>Install/Remove GuppyFLO (Remote Access via TCP Proxy).</li> <li>Backup/Restore Klipper configuration files.</li> <li>Backup/Restore Moonraker database.</li> <li>Delete cache and logs files.</li> <li>Update Debian packages.</li> <li>Restore Web-UI default settings.</li> <li>Restore SSH access for Stock OS.</li> </ul> </li> <li>Added support for Numpy.</li> <li>Added possibility to generate resonances graphics with <code>GENERATE_RESONANCES_GRAPHICS</code> macro.</li> <li>Added support for BigTreeTech MMB Cubic to add chamber temperature sensor and Neopixels.</li> <li>Added support to choose Bed Mesh type before printing. You can now choose type of bed mesh you want to start before printing (Full Bed Mesh, Adaptive Bed Mesh or No Mesh).</li> <li>Added possibility to take screenshots of KlipperScreen with <code>_SCREENSHOT</code> command (screenshots are saved in config folder).</li> <li>Improved Delta Calibration function with new enhanced method. More accurate and with denser coverage that allows better detection of variations of the bed or in the mechanics of the printer, which can improve print quality. You can revert back to classic method by changing <code>enhanced_method</code> parameter to <code>False</code> (in <code>[delta_calibrate]</code> function of <code>printer.cfg</code> file).</li> <li>Updated KlipperScreen service file to wait for Moonraker if present, to not fail the connection on startup and having to retry.</li> <li>Updated Virtual Environments.</li> <li>Updated <code>.kiauh.ini</code> file to allow to use the new Kiauh version.</li> <li>Kiauh can now be started with the simple <code>kiauh</code> command in SSH.</li> <li>Updated Klipper configuration files.</li> <li>Integrated latest Moonraker, Klipper, KlipperScreen, Mainsail and Kiauh builds.</li> </ul>"},{"location":"changelogs/#flsun-os-11-beta-release","title":"FLSUN OS - 1.1 (Beta Release)","text":"<ul> <li>Updated kernel to restore CPU frequency to 1.5GHz instead of 1GHz (50% increase in performance).</li> <li>Disabled Wi-Fi Power Management, this frees up bandwidth, and increases camera fps.</li> <li>Integration of GuppyFLO, a lightweight self-hosted service that allows remote management via TCP Proxy using Moonraker and Tailscale.</li> <li>Replaced hostname <code>FLSUN-OS-XXXX</code> with <code>FLSUN-S1-XXXX</code> (still based on MAC address).</li> <li>Improved SSH header.</li> <li>Updated Klipper configuration files.</li> <li>Updated Web interface configuration files.</li> <li>Integration of FLSUN Gcodes files.</li> <li>Fixed screen brightness.</li> </ul>"},{"location":"changelogs/#flsun-os-10-beta-release","title":"FLSUN OS - 1.0 (Beta Release)","text":"<ul> <li>Initial Beta Release</li> </ul> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"complete-process-summary/","title":"Complete Process Summary","text":"<p>Here are the steps required to install and use FLSUN OS:</p> <ul> <li>Prepare microSD Card for FLSUN OS or  Install FLSUN OS on eMMC</li> <li> Flash Motherboard Firmware<ul> <li>Install STM32 ST-LINK Utility</li> <li>Connect ST-LINK V2 Programmer</li> <li>Backup Motherboard Firmware</li> <li>Flash Bootloader and Klipper Firmware</li> </ul> </li> <li> Flash Closed Loops Boards (Optional but recommended for S1 users only, not for S1 Pro users)</li> <li> Insert microSD Card with FLSUN OS in Core Board if you use microSD Card for FLSUN OS (and not on eMMC)</li> <li> First Boot</li> <li> Update and Configure Printer</li> <li> SSH Connection</li> <li> Update Time Zone</li> <li> Extend storage partition with Easy-Installer (in Extras Menu) to take advantage of the full storage (microSD Card or eMMC)</li> <li> Slicers Settings</li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"documentation/","title":"Documentation","text":""},{"location":"documentation/#motherboard-pinout","title":"Motherboard Pinout","text":""},{"location":"documentation/#extruder-motor-specification","title":"Extruder Motor Specification","text":""},{"location":"documentation/#stepper-motors-specification","title":"Stepper Motors Specification","text":""},{"location":"documentation/#closed-loop-board-schematic","title":"Closed Loop Board Schematic","text":""},{"location":"documentation/#ups-board-schematic","title":"UPS Board Schematic","text":"<p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"easy-installer/","title":"Easy Installer","text":"<p>Easy Installer allows you to install programs or perform some actions in an easy way.</p> <ul> <li> <p>To run it, connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"easy-installer/#install-menu","title":"Install Menu","text":"<ul> <li>1) Install or Update Spoolman \u2192 See  Spoolman</li> <li>2) Install GuppyFLO \u2192 See  Remote Access</li> </ul>"},{"location":"easy-installer/#remove-menu","title":"Remove Menu","text":"<ul> <li>1) Remove Spoolman \u2192 See  Spoolman</li> <li>2) Remove GuppyFLO \u2192 See  Remote Access</li> </ul>"},{"location":"easy-installer/#update-menu","title":"Update Menu","text":"<ul> <li>1) Update Klipper configuration files \u2192 This allows to update your printer with latest Klipper configuration files</li> <li>2) Printer Setup Wizard \u2192 This helps you to configure your printer with the desired features</li> <li>3) Update Motherboard MCU firmware \u2192 This allows to update Klipper firmware of motherboard when Katapult bootloader is installed</li> <li>4) Update MMB Cubic MCU firmware \u2192 This allows to update Klipper firmware of BigTreeTech MMB Cubic</li> <li>5) Update Debian packages \u2192 This allows to update installed packages from Debian repository</li> </ul>"},{"location":"easy-installer/#extras-menu","title":"Extras Menu","text":"<ul> <li>1) Backup Klipper configuration files \u2192This allows to backup Klipper configuration files to a <code>backup_klipper.zip</code> compressed file</li> <li>2) Restore Klipper configuration files \u2192 This allows to restore Klipper configuration files from a <code>backup_klipper.zip</code> compressed file</li> <li>3) Backup Moonraker database \u2192 This allows to backup Moonraker database to a <code>backup_moonraker.zip</code> compressed file</li> <li>4) Restore Moonraker database \u2192 This allows to restore Moonraker database from a <code>backup_moonraker.zip</code> compressed file</li> <li>5) Restore Web-UI default settings \u2192 This allows to restore the pre-configured settings of Mainsail and Fluidd Web interfaces</li> <li>6) Delete cache and logs files \u2192 This allows to delete temporary files and log files</li> <li>7) Extend storage partition \u2192 This allows to extend storage partition to take advantage of the full storage (microSD card or eMMC)</li> </ul>"},{"location":"extruder-calibration/","title":"Extruder Calibration","text":"<p>On an extruder, the rotation_distance is the amount of distance the filament travels for one full rotation of the stepper motor. The best way to get an accurate value for this setting is to use a \"measure and trim\" procedure.</p>"},{"location":"extruder-calibration/#procedure","title":"Procedure","text":"<ul> <li> <p>Remove PTFE tube from the Extruder for the measure.</p> </li> <li> <p>Heat the Hotend to an appropriate temperature and insert filament in it.</p> </li> <li> <p>Use a marker to place a mark on the filament 120 mm from the inlet of the extruder.</p> </li> <li> <p>Then use a digital caliper to measure the actual distance from that mark as accurately as possible.</p> <p>Note this value of 120 mm as the <code>&lt;initial_mark_distance&gt;</code>.</p> </li> <li> <p>Open Console on your Web interface:</p> <ul> <li>On Mainsail Web Interface go to <code>CONSOLE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Console</code> icon on the left side.</li> </ul> </li> <li> <p>Extrude 100mm of filament with the following command sequence:</p> Console<pre><code>G91\n</code></pre> Console<pre><code>G1 E100 F100\n</code></pre> <p>Note this value of 100 mm as the <code>&lt;requested_extrude_distance&gt;</code>.</p> </li> <li> <p>Wait for extruder to complete the movement (this will take several seconds). It's important to use a slow extrusion speed for this test, as a faster speed can cause high pressure in the extruder which will skew the results. So don't use the EXTRUDE button from Mainsail/Fluidd or from the screen for this test as they extrude at a fast rate.</p> </li> <li> <p>Then use a digital caliper to measure the new distance from the inlet of the extruder to the mark on the filament.</p> <p>Note this value as <code>&lt;measured_distance&gt;</code>.</p> </li> <li> <p>Then calculate:</p> <p><code>&lt;initial_mark_distance&gt;</code> <code>&lt;measured_distance&gt;</code> <code>&lt;extrusion_distance&gt;</code></p> </li> <li> <p>Then retrieve the current rotation_distance value from the <code>printer.cfg</code> file at the <code>rotation_distance:</code> line of the <code>[extruder]</code> section:</p> printer.cfg<pre><code>[extruder]\nstep_pin: PE0\ndir_pin: !PB9\nenable_pin: !PE4\nmicrosteps: 16\nrotation_distance: 4.5\n</code></pre> <p>Note this value as <code>&lt;current_rotation_distance&gt;</code>.</p> </li> <li> <p>Calculate the rotation_distance as follows:</p> <p><code>&lt;current_rotation_distance&gt;</code> <code>&lt;extrusion_distance&gt;</code> <code>&lt;requested_extrude_distance&gt;</code> <code>&lt;rotation_distance&gt;</code></p> </li> <li> <p>Then replace the new value in the <code>printer.cfg</code> file by rounding the new <code>rotation_distance</code> to three decimal places.</p> </li> <li> <p>You can now retract filament and replace your PTFE tube in its place, your extruder is calibrated.</p> </li> </ul>"},{"location":"extruder-calibration/#example","title":"Example","text":"<ul> <li> <p>After extruding 100mm, I measure a distance of 18 mm between the inlet of my extruder and the mark on the filament.</p> </li> <li> <p>So I have :</p> <ul> <li>My <code>&lt;initial_mark_distance&gt;</code> value of 120 mm.</li> <li>My <code>&lt;requested_extrude_distance&gt;</code> value of 100 mm.</li> <li>My <code>&lt;measured_distance&gt;</code> value of 18 mm.</li> </ul> </li> <li> <p>So I calculate my current <code>&lt;extrusion_distance&gt;</code> for 100 mm requested:</p> <p><code>&lt;initial_mark_distance&gt;</code> <code>&lt;measured_distance&gt;</code> <code>&lt;extrusion_distance&gt;</code></p> <p>120 mm  18 mm  102 mm</p> </li> <li> <p>I get the <code>&lt;current_rotation_distance&gt;</code> value from the <code>printer.cfg</code> file which is 4.5.</p> </li> <li> <p>So I then calculate my new <code>&lt;rotation_distance&gt;</code> value:</p> <p><code>&lt;current_rotation_distance&gt;</code> <code>&lt;extrusion_distance&gt;</code> <code>&lt;requested_extrude_distance&gt;</code> <code>&lt;rotation_distance&gt;</code></p> <p>4.5 102 mm  100 mm  4.59</p> </li> <li> <p>I replace the rotation_distance: 4.5 line in the <code>printer.cfg</code> file with: rotation_distance: 4.59</p> printer.cfg<pre><code>[extruder]\nstep_pin: PE0\ndir_pin: !PB9\nenable_pin: !PE4\nmicrosteps: 16\nrotation_distance: 4.59\n</code></pre> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"first-boot/","title":"First Boot","text":"<ul> <li> <p>Turn on the printer and you should see the \"Open Source Edition\" boot logo:</p> <p></p> <p>If not, your image was not correctly written, retry:  Prepare microSD Card for FLSUN OS  or  Install FLSUN OS on eMMC</p> </li> <li> <p>When it first starts, the OS will perform several actions (resizing storage size, configuring Web interfaces, etc...), don't touch anything and the printer will restart once finished.</p> </li> <li> <p>After reboot, once you are on the KlipperScreen interface, wait for Moonraker and Klipper to connect, if not click <code>Retry</code> button.The LEDs on the left side of the screen should light up white as soon as the connection is established.</p> </li> <li> <p>Click on <code>Configurations</code> \u2192 <code>System</code> \u2192 <code>Network</code> and connect to your WiFi network.Your local IP address should be displayed in the top right corner (to access the Web interface).</p> </li> <li> <p>Next, take a look to  Update and Configure Printer section.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"flash-closed-loops-boards/","title":"Flash Closed Loops Boards","text":"<p>This new firmware improves stepper motors resonances and fixes much of the salmon skin encountered on the stock firmware. It's the same firmware used on S1 Pro and it's recommended to update for FLSUN S1 users (not for S1 Pro users).</p> <p>Although it is possible to flash the firmware without having the Dupont cable provided in the Silent Kit, for the sake of simplicity this is what we will cover here.</p>"},{"location":"flash-closed-loops-boards/#prerequisites","title":"Prerequisites","text":"<ul> <li>Closed Loops Boards firmware (original from FLSUN):  closed_loop_board_fw.bin</li> <li>Dupont connection cable provided with FLSUN Silent Kit</li> <li>STL file to print:  Closed_Loop_Boards_Tool.stl</li> <li>STM32 ST-LINK Utility ( Windows only):  STM32_ST-LINK_Utility_v4.6.0.zip</li> <li>ST-LINK V2 Programmer: :simple-amazon: Amazon FR / :simple-amazon: Amazon US / :simple-amazon: Amazon CA</li> </ul> <p>Note</p> <p>If you want to restore stock firmware for Closed Loops Boards use this firmware: closed_loop_board_fw_stock.bin</p>"},{"location":"flash-closed-loops-boards/#install-stm32-st-link-utility","title":"Install STM32 ST-LINK Utility","text":"<p>Note</p> <p>You can skip this step if you have already installed the utility.</p> <ul> <li> <p>Unzip <code>STM32_ST-LINK_Utility_v4.6.0.zip</code> file and run <code>STM32 ST-LINK Utility v4.6.0.exe</code> installer.</p> </li> <li> <p>Click on <code>Next</code> button:</p> <p></p> </li> <li> <p>Click on <code>Yes</code> button:</p> <p></p> </li> <li> <p>Click on <code>Next</code> button:</p> <p></p> </li> <li> <p>Click on <code>Finish</code> button:</p> <p></p> </li> <li> <p>A new window appears, click on <code>Next</code> button to install required drivers:</p> <p></p> </li> <li> <p>Then, click on <code>Finish</code> button:</p> <p></p> </li> </ul>"},{"location":"flash-closed-loops-boards/#flash-firmware","title":"Flash Firmware","text":"<ul> <li> <p>Make sure your printer is turned off and unplug the 3 cables from the Closed Loops Board:</p> <p></p> </li> <li> <p>Install Dupont connection cable to the printed STL Tool file and connect it to ST-LINK V2 Programmer:</p> <p></p> <p>Warning</p> <p>Note that the colors of 3.3V and GND on the Dupont cable provided by FLSUN are reversed. Not all STM32 Programmers (especially clones) have the same pin positions.Make sure to match the pins on the SMT32 Programmer with those on the Dupont cable.</p> </li> <li> <p>Place the printed STL Tool file like this and make sure the board touches the bottom of the model:</p> <p></p> </li> <li> <p>Connect the ST-LINK V2 Programmer to a USB port on your computer.</p> </li> <li> <p>Start STM32 ST-LINK Utility and click on <code>Connect to target</code> button: </p> <p></p> <p>If you have this message, it means the Dupont connector is not making contact with the Closed Loop Board, try \u00ab playing \u00bb with the tool until you get the connection:</p> <p></p> <p>If you have this message, it means that the drivers for STM32 Programmer are not installed:</p> <p></p> </li> <li> <p>If the connection is correct, you should get this:</p> <p></p> </li> <li> <p>Click on <code>File</code> \u2192 <code>Open file...</code> and select <code>closed_loop_board_fw.bin</code> firmware file:</p> <p></p> </li> <li> <p>Then, click on <code>Program verify</code> button:</p> <p></p> </li> <li> <p>Make sure this information are the same, click <code>Start</code> button and wait for the firmware to be written:</p> <p></p> </li> <li> <p>If the firmware is written successfully, the following message will appear:</p> <p></p> </li> <li> <p>You can now disconnect from target by clicking on <code>Disconnect</code> button:</p> <p></p> </li> <li> <p>You can now unplug the ST-LINK V2 Programmer from your computer and remove the tool from the Closed Loops Board.</p> </li> <li> <p>Reconnect the 3 cables to the Closed Loops Board and repeat this process for the other two boards.</p> </li> </ul> <p>Note</p> <p>In case you did not buy the Silent Kit, you can still flash the Closed Loops Boards by following this connection diagram but you will need to find a way to keep the cables in contact:</p> <p></p> <p>Warning</p> <p>Not all STM32 Programmers (especially clones) have the same pin positions.Make sure to match the pins on the SMT32 Programmer with those on the Closed Loop Board.</p> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"flash-motherboard-firmware/","title":"Flash Motherboard Firmware","text":"<p>Motherboard firmware needs to be updated to support the latest version of Klipper. The process explains how to flash the Klipper Firmware and the Katapult Bootloader (useful for being able to update future Klipper firmwares later).</p>"},{"location":"flash-motherboard-firmware/#prerequisites","title":"Prerequisites","text":"<ul> <li>Combined Katapult Bootloader + Klipper Firmware for Motherboard:  motherboard_fw.bin</li> <li>STM32 ST-LINK Utility ( Windows only):  STM32_ST-LINK_Utility_v4.6.0.zip</li> <li>ST-LINK V2 Programmer: :simple-amazon: Amazon FR / :simple-amazon: Amazon US / :simple-amazon: Amazon CA</li> <li>4 Dupont cables (usually supplied with the ST-LINK V2 Programmer)</li> </ul>"},{"location":"flash-motherboard-firmware/#install-stm32-st-link-utility","title":"Install STM32 ST-LINK Utility","text":"<p>Note</p> <p>You can skip this step if you have already installed the utility.</p> <ul> <li> <p>Unzip <code>STM32_ST-LINK_Utility_v4.6.0.zip</code> file and run <code>STM32 ST-LINK Utility v4.6.0.exe</code> installer.</p> </li> <li> <p>Click on <code>Next</code> button:</p> <p></p> </li> <li> <p>Click on <code>Yes</code> button:</p> <p></p> </li> <li> <p>Click on <code>Next</code> button:</p> <p></p> </li> <li> <p>Click on <code>Finish</code> button:</p> <p></p> </li> <li> <p>A new window appears, click on <code>Next</code> button to install required drivers:</p> <p></p> </li> <li> <p>Then, click on <code>Finish</code> button:</p> <p></p> </li> </ul>"},{"location":"flash-motherboard-firmware/#connect-st-link-v2-programmer","title":"Connect ST-LINK V2 Programmer","text":"<ul> <li> <p>Make sure your printer is turned off.</p> </li> <li> <p>Connect motherboard JTAG pins to ST-LINK V2 Programmer:</p> <p></p> <p>Warning</p> <p>Not all STM32 Programmers (especially clones) have the same pin positions.Make sure to match the pins on the SMT32 Programmer with those on the motherboard.</p> </li> <li> <p>Connect the ST-LINK V2 Programmer to a USB port on your computer.</p> </li> <li> <p>Start STM32 ST-LINK Utility and click on <code>Connect to target</code> button: </p> <p></p> <p>If you have this message, it means that the Dupont cables are not connected to the right places, check your connections:</p> <p></p> <p>If you have this message, it means that the drivers for STM32 Programmer are not installed:</p> <p></p> <p>If you have this message, it means that the memory is protected against read out:</p> <p></p> <p>Click on <code>Target</code> \u2192 <code>Option Bytes</code> and set <code>Read Out Protection</code> parameter to Disabled, and then click <code>Apply</code> button:</p> <p></p> </li> <li> <p>If the connection is correct, you should get this:</p> <p></p> </li> </ul>"},{"location":"flash-motherboard-firmware/#backup-motherboard-firmware","title":"Backup Motherboard Firmware","text":"<p>First of all, it's imperative to backup your motherboard's stock firmware in case you want to restore it.</p> <ul> <li> <p>When ST-LINK V2 Programmer is connected to motherboard, make sure the Size is set to <code>0x80000</code></p> <p></p> </li> <li> <p>Then, click on <code>File</code> \u2192 <code>Save file as...</code>:</p> <p></p> </li> <li> <p>And save the file on your computer with the name you want and the extension <code>.bin</code>. The file size should be 512 KB, which is a full dump.</p> </li> </ul> <p>Note</p> <p>If needed, you can download a full dump of motherboard:     - FLSUN S1 \u2192  motherboard_s1_fw_stock.bin     - FLSUN S1 Pro \u2192  motherboard_s1pro_fw_stock.bin</p>"},{"location":"flash-motherboard-firmware/#flash-bootloader-and-klipper-firmware","title":"Flash Bootloader and Klipper Firmware","text":"<ul> <li> <p>When ST-LINK V2 Programmer is connected to motherboard, click on <code>File</code> \u2192 <code>Open file...</code> and select <code>motherboard_fw.bin</code> firmware file:</p> <p></p> </li> <li> <p>Then, click on <code>Program verify</code> button:</p> <p></p> </li> <li> <p>Make sure this information are the same, click <code>Start</code> button and wait for the firmware to be written:</p> <p></p> </li> <li> <p>If the firmware is written successfully, the following message will appear:</p> <p></p> </li> <li> <p>You can now disconnect from target by clicking on <code>Disconnect</code> button:</p> <p></p> </li> <li> <p>You can now unplug the ST-LINK V2 Programmer from your computer and remove Dupont cables from motherboard.</p> </li> <li> <p>Next, follow  Insert microSD Card with FLSUN OS in Core Board section.</p> </li> </ul> <p>Note</p> <p>If you want to go back to stock OS you need to reflash your backup firmware.</p> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"insert-microsd-card-with-flsun-os-in-core-board/","title":"Insert microSD Card with FLSUN OS in Core Board","text":"<ul> <li> <p>Make sure the printer is turned off.</p> </li> <li> <p>Use the H2.0 Allen wrench in the accessory box to remove the screws from the top cover of the printer.</p> </li> <li> <p>Use the H2.0 Allen wrench in the accessory box to remove the screws above the screen:</p> <p></p> </li> <li> <p>Use the H3.0 Allen wrench in the accessory box to remove the screws under the screen:</p> <p></p> </li> <li> <p>Unplug the display power cord and three data cables:</p> <p></p> </li> <li> <p>Use the H2.0 Allen wrench in the accessory box to remove the eight screws on the back cover of the screen, and disassemble the back cover of the screen:</p> <p></p> </li> <li> <p>Insert your microSD card into the port here:</p> <p></p> <p></p> </li> <li> <p>You can now screw the screen box back on, reconnect the cables and reattach it to the printer.</p> <p>Warning</p> <p>To avoid issues with camera detection, do not reconnect the cable from the USB 1 port, it is for the cameras on the hotend which are not used. You can also remove them from the effector to save a little weight: </p> </li> <li> <p>Next, follow  First Boot section.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"install-flsun-os-on-emmc/","title":"Install FLSUN OS on eMMC","text":"<p>This process installs FLSUN OS on the core board's eMMC memory.</p> <p>What are the advantages over microSD? The eMMC offers faster read and write speed and is less prone to physical corruption. It is known to be more robust and durable than SD cards as it can withstand more write cycles before failing.</p> <p>Warning</p> <p>This is intended only for advanced users who are no longer using the Stock OS. Any mishandling can render your core board unusable! Only use this procedure if you know what you are doing. I will not be responsible if something goes wrong. It's better to make a backup of your rootfs partition before. If needed, here is a full backup of eMMC with Stock OS 1.0.6.4:  STOCK-OS-S1-EMMC-1.0.6.4.7z This can restore a bricked core board.</p>"},{"location":"install-flsun-os-on-emmc/#backup-emmc","title":"Backup eMMC","text":"<ul> <li> <p>First, it's necessary to boot FLSUN OS from the microSD card.</p> <p>See  Prepare microSD Card for FLSUN OS section.</p> </li> <li> <p>When FLSUN OS is ready, plug a USB drive of at least <code>32 GB</code> formatted in <code>exFAT</code> into one of the printer's USB ports.</p> </li> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following commands (one at a time) to backup each partition on USD drive:</p> <p></p>SSH Command Prompt - Backup uboot.img<pre><code>sudo dd if=/dev/mmcblk0p1 of=/home/pi/printer_data/gcodes/USB-DISK-1/uboot.img status=progress bs=1M\n</code></pre> SSH Command Prompt - Backup misc.img<pre><code>sudo dd if=/dev/mmcblk0p2 of=/home/pi/printer_data/gcodes/USB-DISK-1/misc.img status=progress bs=1M\n</code></pre> SSH Command Prompt - Backup boot.img<pre><code>sudo dd if=/dev/mmcblk0p3 of=/home/pi/printer_data/gcodes/USB-DISK-1/boot.img status=progress bs=1M\n</code></pre> SSH Command Prompt - Backup recovery.img<pre><code>sudo dd if=/dev/mmcblk0p4 of=/home/pi/printer_data/gcodes/USB-DISK-1/recovery.img status=progress bs=1M\n</code></pre> SSH Command Prompt - Backup backup.img<pre><code>sudo dd if=/dev/mmcblk0p5 of=/home/pi/printer_data/gcodes/USB-DISK-1/backup.img status=progress bs=1M\n</code></pre> SSH Command Prompt - Backup rootfs.img<pre><code>sudo dd if=/dev/mmcblk0p6 of=/home/pi/printer_data/gcodes/USB-DISK-1/rootfs.img status=progress bs=1M\n</code></pre> SSH Command Prompt - Backup gpt.img<pre><code>sudo dd if=/dev/mmcblk0 of=/home/pi/printer_data/gcodes/USB-DISK-1/gpt.img bs=512 count=64\n</code></pre> SSH Command Prompt - Backup bootloader.img<pre><code>sudo dd if=/dev/mmcblk0 of=/home/pi/printer_data/gcodes/USB-DISK-1/bootloader.img bs=512 count=16320 skip=64\n</code></pre><p></p> </li> <li> <p>When it's done, you can remove the USB drive and keep your backup images safe.</p> </li> <li> <p>Also remember to remove the microSD card after turning off the printer.</p> </li> </ul>"},{"location":"install-flsun-os-on-emmc/#prerequisites","title":"Prerequisites","text":"<ul> <li> <p>1 x USB-A to USB-C data cable</p> </li> <li> <p>RKDevTool ( Windows only): RKDevTool_Release_v2.96.zip</p> </li> <li> <p>Rockchip driver ( Windows only): DriverAssitant_v5.0.zip</p> </li> <li> <p>FLSUN OS image (EMMC version):  Download</p> </li> </ul>"},{"location":"install-flsun-os-on-emmc/#install-driver","title":"Install Driver","text":"<ul> <li> <p>Unzip <code>DriverAssitant_v5.0.zip</code> file and run <code>DriverInstall.exe</code> installer.</p> </li> <li> <p>Click on <code>Install Driver</code> button:</p> <p></p> </li> <li> <p>If Windows asks you to confirm the installation, accept.</p> </li> <li> <p>Once finished, you can exit the installer:</p> <p></p> </li> </ul>"},{"location":"install-flsun-os-on-emmc/#write-image","title":"Write Image","text":"<ul> <li> <p>Make sure the printer is turned off.</p> </li> <li> <p>Use the H2.0 Allen wrench in the accessory box to remove the screws from the top cover of the printer.</p> </li> <li> <p>Use the H2.0 Allen wrench in the accessory box to remove the screws above the screen:</p> <p></p> </li> <li> <p>Use the H3.0 Allen wrench in the accessory box to remove the screws under the screen:</p> <p></p> </li> <li> <p>Unplug the display power cord and three data cables:</p> <p></p> </li> <li> <p>Use the H2.0 Allen wrench in the accessory box to remove the eight screws on the back cover of the screen, and disassemble the back cover of the screen:</p> <p></p> </li> <li> <p>Connect the USB cable to the USB-C 1 port on the core board:</p> <p></p> </li> <li> <p>Unzip <code>RKDevTool_Release_v2.96.zip</code> file and run <code>RKDevTool.exe</code> installer:</p> <p></p> </li> <li> <p>Unzip FLSUN OS image (EMMC version).</p> </li> <li> <p>Connect the USB cable to your computer.</p> </li> <li> <p>Locate the buttons on the core board and turn on the printer:</p> <p></p> </li> <li> <p>Perform this combination to enter in USB Mode:</p> <p>Hold <code>BOOT9200</code> button \u2192 Press <code>BOOT2100</code> button \u2192 Release <code>BOOT9200</code> button</p> </li> <li> <p>RKDevTool should display <code>Found One LOADER Device</code>:</p> <p></p> </li> <li> <p>Check the  <code>Write by Address</code> box and click on the rectangle at the <code>boot</code> line to select the boot.img file previously unzipped:</p> <p></p> </li> <li> <p>Click on the rectangle at the <code>rootfs</code> line to select the rootfs.img file previously unzipped:</p> <p></p> </li> <li> <p>Once images are selected, click on the <code>Run</code> button:</p> <p></p> <p>Note</p> <p>If you encounter the error Download image failed:   - Make sure you are using a USB data cable   - Try to copy image files to the root of your hard disk (C:)   - Restart printer and reperform combination to enter in USB Mode</p> </li> <li> <p>Wait for the image to be written, this takes several minutes.</p> </li> <li> <p>Once completed, the core board reboots to load the OS:</p> <p></p> </li> <li> <p>Wait for the OS to fully load, until KlipperScreen is displayed.</p> </li> <li> <p>You can now turn off the printer, screw the screen box back on, reconnect the cables and reattach it to the printer.</p> <p>Warning</p> <p>To avoid issues with camera detection, do not reconnect the cable from the USB 1 port, it is for the cameras on the hotend which are not used. You can also remove them from the effector to save a little weight: </p> </li> <li> <p>Now you have FLSUN OS installed on the eMMC and it is still possible to boot from a microSD card if needed.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"moonraker-timelapse/","title":"Moonraker Timelapse","text":"<p>Moonraker Timelapse is a 3rd party Moonraker component to create timelapse of 3D prints. It can be enabled with  Easy Installer or with Printer Setup Wizard from KlipperScreen or Web interface (see  Update and Configure Printer section) but if you need to configure it manually follow these steps.</p> <ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command:</p> SSH Command Prompt<pre><code>ln -srfn \"/home/pi/moonraker-timelapse/klipper_macro/timelapse.cfg\" \"/home/pi/printer_data/config/timelapse.cfg\"\n</code></pre> </li> <li> <p>Open <code>config.cfg</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Remove the first <code>#</code> symbol at the following line:</p> config.cfg<pre><code>#######################################################\n# Timelapse Configuration\n#######################################################\n\n# If you want to enable Timelapse -&gt; Enable 'timelapse.cfg'\n# ---------------------------------------------------------\n\n#[include timelapse.cfg]\n</code></pre> </li> <li> <p>Click on <code>SAVE &amp; RESTART</code> at the top right to save the file.</p> </li> <li> <p>Open <code>moonraker.conf</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Remove the first <code>#</code> symbol at the following lines:</p> moonraker.conf<pre><code>#[timelapse]\n#output_path: ~/printer_data/timelapse\n#frame_path: /tmp/timelapse\n\n#[update_manager timelapse]\n#type: git_repo\n#primary_branch: main\n#path: ~/moonraker-timelapse\n#origin: https://github.com/mainsail-crew/moonraker-timelapse.git\n#managed_services: klipper moonraker\n</code></pre> </li> <li> <p>Click on <code>SAVE &amp; RESTART</code> at the top right to save the file.</p> </li> <li> <p>Make sure you have configured you slicer for Timelapse, see  Slicers Settings section.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"prepare-microsd-card-for-flsun-os/","title":"Prepare microSD Card for FLSUN OS","text":"<p>Note</p> <p>You can also install FLSUN OS on eMMC memory. See  Install FLSUN OS on eMMC section.</p>"},{"location":"prepare-microsd-card-for-flsun-os/#prerequisites","title":"Prerequisites","text":"<ul> <li> <p>microSD card with a minimum size of 16GB (I recommend SanDisk Extreme PRO)</p> </li> <li> <p>Raspberry Pi Imager:  Download</p> </li> <li> <p>FLSUN OS image (SD version):  Download</p> </li> </ul>"},{"location":"prepare-microsd-card-for-flsun-os/#prepare-microsd","title":"Prepare microSD","text":"<ul> <li> <p>Insert the microSD card into your computer.</p> </li> <li> <p>Start Raspberry Pi Imager.</p> </li> <li> <p>Click on <code>CHOOSE OS</code> button:</p> <p></p> </li> <li> <p>Click on <code>Use Custom</code> button and select FLSUN OS image file (with the extension .gz):</p> <p></p> </li> <li> <p>Click on <code>CHOOSE STORAGE</code> button and select your microSD card storage:</p> <p></p> </li> <li> <p>Click on <code>NEXT</code> and select your microSD card storage:</p> <p></p> </li> <li> <p>When asked if you would like to apply OS customisation settings, click on <code>NO</code> button:</p> <p></p> </li> <li> <p>Then confirm by clicking on <code>YES</code> button:</p> <p></p> </li> <li> <p>Wait until the writing is completed:</p> <p></p> </li> <li> <p>Then wait for the verification to complete:</p> <p></p> </li> <li> <p>Your microSD card is ready, you can remove it from your computer:</p> <p></p> </li> <li> <p>Next, follow  Flash Motherboard Firmware section.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"pressure-advance/","title":"Pressure Advance","text":"<p>You can define Pressure Advance settings:</p> <ul> <li> <p>Open <code>printer.cfg</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Search this line in <code>Extruder &amp; Driver Settings</code> section and replace the value:</p> printer.cfg<pre><code>pressure_advance: 0.001\n</code></pre> <p>The value of Pressure Advance can be defined as follows:</p> <ul> <li>Value <code>=</code> 0 \u2192 Pressure Advance is disabled </li> <li>Value <code>&lt;=</code> 0.002 \u2192 Pressure Advance is automatically adjusted by the firmware depending of the speed </li> <li>Value <code>&gt;</code> 0.002 \u2192 The defined value is used </li> </ul> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"remote-access/","title":"Remote Access","text":"<p>GuppyFLO is a lightweight self-hosted service that allows remote management via TCP Proxy using Moonraker and Tailscale. It allows you to access your printer outside your local network in a secure way.</p>"},{"location":"remote-access/#install-guppyflo","title":"Install GuppyFLO","text":"<ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 1 for Install menu \u2192 2 for Install GuppyFLO \u2192 Enter to confirm your choice:</p> <p></p> </li> <li> <p>After installation you get this:</p> <p></p> </li> <li> <p>Then go to this address to connect to your Tailscale account or create one: https://login.tailscale.com/start</p> </li> <li> <p>Once logged in, go to this address and enable the <code>MagicDNS</code> feature: https://login.tailscale.com/admin/dns</p> <p></p> </li> <li> <p>You can now connect your printer to your Tailscale account by going to the address given in Step 3 and clicking the <code>Connect</code> button:</p> <p></p> </li> <li> <p>On your Tailscale dashboard you can now see your connected printer:</p> <p></p> </li> <li> <p>You can change the name of the printer (the name corresponds to the url you will access to connect remotely):</p> <p></p> </li> <li> <p>Disable <code>Auto-generate from OS hostname</code>, enter the desired name and click on <code>Update name</code> button:</p> <p></p> </li> <li> <p>Now install the Tailscale client on the device from which you want to access your printer by going to this address:  https://tailscale.com/download</p> </li> <li> <p>Sign-in and connect your client to your Tailscale account (here I use my mobile):</p> <p> </p> </li> <li> <p>You can now remotely connect to your printer with the following addresses:</p> <p>You can access to Mainsail with <code>http://gyppyflo/</code> (by default) or with your custom hostname, here: <code>http://flsun-s1/</code>. You can access to Fluidd with <code>http://guppyflo:81/</code> (by default) or with your custom hostname, here: <code>http://flsun-s1:81/</code>.</p> Mainsail Fluidd </li> </ul>"},{"location":"remote-access/#remove-guppyflo","title":"Remove GuppyFLO","text":"<ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 2 for Remove menu \u2192 2 for Remove GuppyFLO \u2192 Enter to confirm your choice:</p> <p></p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"screenshots/","title":"Screenshots","text":"<ul> <li> <p>Main Menu</p> <p></p> </li> <li> <p>Move Panel</p> <p></p> </li> <li> <p>Temperature Panel</p> <p></p> </li> <li> <p>Filament Panel</p> <p></p> </li> <li> <p>Unload Panel</p> <p></p> </li> <li> <p>Print Panels</p> <p></p> <p></p> </li> <li> <p>Bed Mesh Settings Panel</p> <p></p> </li> <li> <p>Bed Heating Settings Panel</p> <p></p> </li> <li> <p>Configurations Panel</p> <p></p> </li> <li> <p>Calibrations Panel</p> <p></p> </li> <li> <p>Drying Box Panels</p> <p></p> <p></p> <p></p> </li> <li> <p>Limits Panel</p> <p></p> </li> <li> <p>Fine Tune Panel</p> <p></p> </li> <li> <p>Fan Panel</p> <p></p> </li> <li> <p>LED Panel</p> <p></p> </li> <li> <p>Neopixels LED Panel</p> <p></p> </li> <li> <p>Brightness Panel</p> <p></p> </li> <li> <p>Spoolman Panel</p> <p></p> </li> <li> <p>Macros Panel</p> <p></p> </li> <li> <p>Console Panel</p> <p></p> </li> <li> <p>Updates Panel</p> <p></p> </li> <li> <p>System Panel</p> <p></p> </li> <li> <p>System Info Panel</p> <p></p> </li> <li> <p>About Panel</p> <p></p> </li> <li> <p>Shutdown Panel</p> <p></p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"slicers-settings/","title":"Slicers Settings","text":""},{"location":"slicers-settings/#settings-for-bed-mesh-selection","title":"Settings for Bed Mesh Selection","text":"<p>In order for the Bed Mesh Selection to work it's necessary to modify the Start Gcode.</p>"},{"location":"slicers-settings/#orcaslicer","title":"OrcaSlicer","text":"<ul> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 Start G-code</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>SET_PRINT_STATS_INFO TOTAL_LAYER=[total_layer_count]\n_START_GCODE X_MIN={first_layer_print_min[0]} X_MAX={first_layer_print_max[0]} Y_MIN={first_layer_print_min[1]} Y_MAX={first_layer_print_max[1]} BED_TEMP=[first_layer_bed_temperature] HOTEND_TEMP=[first_layer_temperature]\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 End G-code</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>_END_GCODE\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 Layer change G-code</p> </li> <li> <p>And add this Gcode:</p> <pre><code>SET_PRINT_STATS_INFO CURRENT_LAYER={layer_num + 1}\n</code></pre> </li> <li> <p>Also make sure that <code>Label object</code> and <code>Exclude object</code> settings are enabled in the <code>Others</code> tab of the print settings.</p> </li> </ul>"},{"location":"slicers-settings/#flsunslicer","title":"FlsunSlicer","text":"<ul> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 Start G-code</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>SET_PRINT_STATS_INFO TOTAL_LAYER=[total_layer_count]\n_START_GCODE X_MIN={first_layer_print_min[0]} X_MAX={first_layer_print_max[0]} Y_MIN={first_layer_print_min[1]} Y_MAX={first_layer_print_max[1]} BED_TEMP=[first_layer_bed_temperature] HOTEND_TEMP=[first_layer_temperature]\n;is_AB\n;is_AB\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 End G-code</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>_END_GCODE\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 Layer change G-code</p> </li> <li> <p>And add this Gcode:</p> <pre><code>SET_PRINT_STATS_INFO CURRENT_LAYER={layer_num + 1}\n</code></pre> </li> <li> <p>Also make sure that <code>Label object</code> and <code>Exclude object</code> settings are enabled in the <code>Others</code> tab of the print settings.</p> </li> </ul>"},{"location":"slicers-settings/#prusaslicer-superslicer","title":"PrusaSlicer / SuperSlicer","text":"<ul> <li> <p>Go to Printer Settings \u2192 Custom G-code \u2192 Start Gcode</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>SET_PRINT_STATS_INFO TOTAL_LAYER=[total_layer_count]\n_START_GCODE X_MIN={first_layer_print_min[0]} X_MAX={first_layer_print_max[0]} Y_MIN={first_layer_print_min[1]} Y_MAX={first_layer_print_max[1]} BED_TEMP=[first_layer_bed_temperature] HOTEND_TEMP=[first_layer_temperature]\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 Custom G-code \u2192 End Gcode</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>_END_GCODE\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 Custom G-code \u2192 After layer change Gcode</p> </li> <li> <p>And add this Gcode:</p> <pre><code>SET_PRINT_STATS_INFO CURRENT_LAYER={layer_num + 1}\n</code></pre> </li> <li> <p>Go to Printer Settings \u2192 General \u2192 Firmware \u2192 G-code flavor and define this setting to <code>Klipper</code>.</p> </li> <li> <p>Go to Printer Settings \u2192 Output options \u2192 Output file \u2192 Label objects and define this settings to <code>Firmware-specific</code>.</p> </li> </ul>"},{"location":"slicers-settings/#settings-for-timelapse","title":"Settings for Timelapse","text":"<p>Timelapse feature can be configured automatically with  Easy Installer or with Printer Setup Wizard from KlipperScreen or Web interface (see  Update and Configure Printer section). To use the layermacro mode which grabs a frame every layer change you need to add the <code>TIMELAPSE_TAKE_FRAME</code> macro to your slicer so that it is added to the Gcode before a layer change.</p>"},{"location":"slicers-settings/#orcaslicer-flsunslicer","title":"OrcaSlicer / FlsunSlicer","text":"<ul> <li> <p>Go to Printer Settings \u2192 Machine G-code \u2192 Before layer change G-code</p> <pre><code>;BEFORE_LAYER_CHANGE\n;[layer_z]\nG92 E0\nTIMELAPSE_TAKE_FRAME\n</code></pre> </li> </ul>"},{"location":"slicers-settings/#prusaslicer-superslicer_1","title":"PrusaSlicer / SuperSlicer","text":"<ul> <li> <p>Go to Printer Settings \u2192 Custom G-code \u2192 Before layer change Gcode</p> </li> <li> <p>And replace existing Gcode by this one:</p> <pre><code>;BEFORE_LAYER_CHANGE\n;[layer_z]\nG92 E0\nTIMELAPSE_TAKE_FRAME\n</code></pre> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"special-thanks/","title":"Special Thanks","text":"<p>Thanks to everyone who participated or indirectly participated in this project.</p> <ul> <li>Taiwan22 for co-working on this project</li> <li>Arksine for Moonraker</li> <li>Mainsail Crew for Mainsail</li> <li>Fluidd Crew for Fluidd</li> <li>alfrix for KlipperScreen</li> <li>jacksonliam for MJPG-Streamer</li> <li>dw-0 for Kiauh</li> <li>Donkie for Spoolman</li> <li>ballaswag for GuppyFLO</li> <li>Debian OS builder for building from source</li> <li>AdamV3D for beta-test</li> <li>ChaosRene for beta-test</li> <li>Fisheye3D for beta-test</li> <li>Diego Santos for beta-test</li> <li>DonssnakeGer for beta-test</li> <li>frjavi for beta-test</li> <li>Gareth Kirwan for beta-test</li> <li>martona for beta-test</li> <li>ModernMakerStudios for beta-test</li> <li>nlef for beta-test</li> <li>Simon D\u00f6rfner for beta-test</li> <li>Twinnecrotic for beta-test</li> <li>weapwnx for beta-test</li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"spoolman/","title":"Spoolman","text":"<p>Spoolman is a self-hosted web service designed to help you efficiently manage your 3D printer filament spools and monitor their usage.</p>"},{"location":"spoolman/#install-spoolman","title":"Install Spoolman","text":"<ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 1 for Install menu \u2192 1 for Install or Update Spoolman \u2192 Enter to confirm your choice:</p> <p></p> </li> <li> <p>The installation takes some time, once completed you can access the Spoolman Web interface at this address:</p> <p><code>http://xxx.xxx.xxx.xxx:7912/</code> (replacing xxx.xxx.xxx.xxx by your local IP address)</p> <p></p> </li> <li> <p>You can also manage Spoolman on Mainsail and Fluidd:</p> Mainsail Fluidd </li> </ul> <p>Note</p> <p>You can update Spoolman to a newer version by reinstalling it without having to remove it first. Updating keeps your existing database.</p>"},{"location":"spoolman/#remove-spoolman","title":"Remove Spoolman","text":"<ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 2 for Remove menu \u2192 1 for Remove Spoolman \u2192 Enter to confirm your choice:</p> <p></p> </li> <li> <p>Installer will ask you if you want to keep or delete your database (in case you want to reinstall it later).</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"ssh-connection/","title":"SSH Connection","text":"<ul> <li> <p>Download and install the MobaXterm software:  Download</p> </li> <li> <p>Launch it then click on the <code>Session</code> icon:</p> <p></p> </li> <li> <p>Then on then <code>SSH</code> icon:</p> <p></p> </li> <li> <p>Enter the IP address of your printer in the <code>Remote Host</code> field, check the <code>Specify username</code> box and enter the username <code>pi</code> in the field then click on <code>OK</code>:</p> <p></p> </li> <li> <p>On the new displayed window, enter the password <code>flsun</code> (it's not displayed when typing, this is normal).</p> </li> <li> <p>An authorization window will appear, authorize it. It's also possible that another window asking you to change the password will appear, ignore it.</p> </li> <li> <p>Once connected, on the left part of the window you have access to the folders and files of your printer and on the right part to the SSH command prompt window:</p> <p></p> </li> </ul> <p>Note</p> <p>You can access via SSH with these credentials: - root \u2192 flsun - pi \u2192 flsun</p> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"tips/","title":"Tips","text":""},{"location":"tips/#lock-screen","title":"Lock Screen","text":"<p>You can lock the screen with password. Note this is not a secure system, it's saved as plain text in KlipperScreen configuration file, but it's intended to deter children or people present when printing.</p> <ul> <li> <p>Open <code>KlipperScreen.conf</code> file:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>Remove the <code>#</code> symbol before <code>lock_password</code> setting and define pasword you want (by default: flsun):</p> KlipperScreen.conf<pre><code>[main]\n# Set the password to use when locking the screen, this is not a secure system, it's saved as plain text,\n# but it's intended to deter children or people present when printing.\n#lock_password: flsun\n</code></pre> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> <li> <p>You can now lock the screen on Shutdown Panel when is needed:</p> <p></p> </li> </ul>"},{"location":"tips/#power-button","title":"Power Button","text":"<p>You can control the short press of the power button (right of the screen).</p> <ul> <li> <p>Open <code>macros.cfg</code> file in <code>Configurations</code> folder:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Configuration</code> icon on the left side.</li> </ul> </li> <li> <p>And edit this macro by replacing the Gcode command with whatever you want to run when you short press the power button:</p> macros.cfg<pre><code>[gcode_macro _PWR_KEY]\ndescription: Short press for power button\ngcode:\n  M117 Short Press done!\n</code></pre> </li> <li> <p>Once done, click on <code>SAVE &amp; RESTART</code> button at the top right to save the file.</p> </li> </ul> <p>Note</p> <p>By default, a long press on the power button power off the system.</p>"},{"location":"tips/#take-a-screenshot","title":"Take a Screenshot","text":"<p>You can take a screenshot of KlipperScreen.</p> <ul> <li> <p>Open your Web interface and:</p> <ul> <li>On Mainsail Web Interface go to <code>CONSOLE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Console</code> icon on the left side.</li> </ul> </li> <li> <p>Enter this command:</p> Console<pre><code>_SCREENSHOT\n</code></pre> </li> <li> <p>A screenshot will be saved every time the command is executed in the folder:</p> <p>/home/pi/printer_data/config/screenshots</p> <p>Note</p> <p>You can take many screenshots, they will be saved as screenshot_001.png, screenshot_002.png, etc...</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"update-and-configure-printer/","title":"Update and Configure Printer","text":"<p>The Open Source OS is already ready to use and configured for the FLSUN S1 Stock version but you need to configure it if you use Silent Fan Upgrade Kit (CPAP less noisy) or S1 Pro.</p> <p></p> <p>To update to the latest builds, Klipper configuration files and configure your printer, you have 3 possibilities.</p>"},{"location":"update-and-configure-printer/#from-klipperscreen","title":"From KlipperScreen","text":"<ul> <li> <p>Go to the <code>Configurations</code> \u2192 <code>Updates</code> menu:</p> <p></p> </li> <li> <p>Click on <code>Refresh</code> button to check for available updates.</p> </li> <li> <p>Click on <code>Full Update</code> button to update if updates are available.</p> </li> <li> <p>Click on <code>Update Klipper Configuration Files</code> button to update Klipper configuration files.</p> </li> <li> <p>Then, go to the <code>Configurations</code> \u2192 <code>System</code> menu and click on <code>Printer Setup Wizard</code> button to configure features you need:</p> <p></p> </li> <li> <p>After that, don't forget to calibrate your printer before starting a print!:</p> <p>Go to the <code>Configurations</code> \u2192 <code>Calibrations</code> menu.</p> <ul> <li>Motors Calibration \u2192 To calibrate Motors</li> <li>Z Offset Calibration \u2192 To calibrate Z Offset</li> <li>Bed Mesh \u2192 To perform Delta Calibration and Bed Leveling</li> <li>Input Shaper \u2192 To measure Resonances</li> </ul> </li> <li> <p>Enjoy </p> </li> </ul>"},{"location":"update-and-configure-printer/#from-mainsail-or-fluidd","title":"From Mainsail or Fluidd","text":"<ul> <li> <p>Access to <code>Update Manager</code>:</p> <ul> <li>On Mainsail Web Interface go to <code>MACHINE</code> tab on the left side.</li> <li>On Fluidd Web Interface go to <code>Settings</code> icon \u2192 <code>Software Updates</code> tab  on the left side.</li> </ul> </li> <li> <p>Click the refresh button and update all the versions that can be updated:</p> Mainsail Fluidd </li> <li> <p>Next, run <code>UPDATE_CONFIGURATION_FILES</code> macro to update Klipper configuration files.</p> </li> <li> <p>And then, run <code>PRINTER_SETUP_WIZARD</code> macro to configure features you need.</p> </li> <li> <p>After that, don't forget to calibrate your printer before starting a print!:</p> <p>Go to the <code>Configurations</code> \u2192 <code>Calibrations</code> menu.</p> <ul> <li>Motors Calibration \u2192 To calibrate Motors</li> <li>Z Offset Calibration \u2192 To calibrate Z Offset</li> <li>Bed Mesh \u2192 To perform Delta Calibration and Bed Leveling</li> <li>Input Shaper \u2192 To measure Resonances</li> </ul> </li> <li> <p>Enjoy </p> </li> </ul>"},{"location":"update-and-configure-printer/#from-ssh-with-easy-installer","title":"From SSH with Easy Installer","text":"<ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 3 for Update menu \u2192 Enter to confirm your choice:</p> <p></p> </li> <li> <p>Enter 1 for Update Klipper configuration files \u2192 Enter to confirm your choice and configuration files will be updated.</p> </li> <li> <p>Then, enter 2 for Printer Setup Wizard \u2192 Enter to confirm your choice and configure features you need.</p> </li> <li> <p>After that, don't forget to calibrate your printer before starting a print!:</p> <p>Go to the <code>Configurations</code> \u2192 <code>Calibrations</code> menu.</p> <ul> <li>Motors Calibration \u2192 To calibrate Motors</li> <li>Z Offset Calibration \u2192 To calibrate Z Offset</li> <li>Bed Mesh \u2192 To perform Delta Calibration and Bed Leveling</li> <li>Input Shaper \u2192 To measure Resonances</li> </ul> </li> <li> <p>Enjoy </p> </li> </ul> <p>Note</p> <p>If needed, all Klipper configuration files are available here.</p> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"update-motherboard-firmware/","title":"Update Motherboard Firmware","text":"<p>When you have already flashed the firmware (with the Katapult Bootloader), you will be able to update your motherboard MCU with a future Klipper Firmware.</p> <p>Note</p> <p>MCUs have limited write cycles (about 10K cycles for a STM32 chip). Updating the firmware with each Klipper release could shorten the life of your MCU! When is it necessary to update Klipper firmware? Every time Klipper mentions to update the MCU at startup, no more.</p> <ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to start Easy Installer:</p> SSH Command Prompt<pre><code>easy-installer\n</code></pre> <p></p> </li> <li> <p>Enter 3 for Extras menu \u2192 2 for Update Motherboard MCU firmware \u2192 Enter to confirm your choice:</p> <p></p> </li> <li> <p>Klipper Firmware will be builded and flashed.</p> </li> </ul>"},{"location":"update-motherboard-firmware/#extras","title":"Extras","text":"<p>You can build your own Katapult Bootloader and Klipper Firmware and combine them into a ready-to-flash file. </p> <ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following commands (one at a time) to configure Katapult Bootloader:</p> <p></p>SSH Command Prompt<pre><code>cd ~/katapult &amp;&amp; git reset --hard &amp;&amp; git pull\n</code></pre> SSH Command Prompt<pre><code>make menuconfig\n</code></pre><p></p> </li> <li> <p>Move on the menu with the \u2191 and \u2193 keys of your keyboard and validate the selected item with the Enter key and select these settings:</p> <p></p> </li> <li> <p>Then on your keyboard press the Q key then Y to save configuration.</p> </li> <li> <p>Enter the following command to compile Katapult Bootloader:</p> SSH Command Prompt<pre><code>make clean &amp;&amp; make\n</code></pre> </li> <li> <p>When it's done, enter the following commands (one at a time) to configure Klipper Firmware:</p> <p></p>SSH Command Prompt<pre><code>cd ~/klipper &amp;&amp; git reset --hard &amp;&amp; git pull\n</code></pre> SSH Command Prompt<pre><code>make menuconfig\n</code></pre><p></p> </li> <li> <p>Move on the menu with the \u2191 and \u2193 keys of your keyboard and validate the selected item with the Enter key and select these settings:</p> <p></p> </li> <li> <p>Then on your keyboard press the Q key then Y to save configuration.</p> </li> <li> <p>Enter the following command to compile Klipper Firmware:</p> SSH Command Prompt<pre><code>make clean &amp;&amp; make\n</code></pre> </li> <li> <p>When it's done, enter the following command to combine Katapult Bootloader and Klipper Firmware into a ready-to-flash file:</p> SSH Command Prompt<pre><code>cd &amp;&amp; ./flsun-os/system/merge_firmware.py\n</code></pre> </li> <li> <p>Get the firmware named <code>motherboard_fw.bin</code> in <code>/home/pi</code> directory (on the left panel of MobaXterm, right click on the file and select <code>Download</code>).</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"update-time-zone/","title":"Update Time Zone","text":"<p>Time Zone is not defined by default, follow these instructions to set it:</p> <ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, enter the following command to check the current time zone:</p> SSH Command Prompt<pre><code>timedatectl\n</code></pre> </li> <li> <p>You can change your time zone by entering this command:</p> SSH Command Prompt<pre><code>sudo dpkg-reconfigure tzdata\n</code></pre> </li> <li> <p>On the page that appears, select your geographic area from the list and press <code>Enter</code>.</p> </li> <li> <p>Then select your time zone in the new list and press <code>Enter</code>.</p> </li> <li> <p>You can then verify that the change has been taken into account by retyping this command:</p> SSH Command Prompt<pre><code>timedatectl\n</code></pre> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"web-interfaces/","title":"Web Interfaces","text":"<p>By default only Mainsail is installed but you can also install Fluidd.</p> <p>You have two possibilities:</p> <ul> <li>Keep Mainsail on port 80 and install Fluidd on port 81</li> <li>Remove Mainsail and install Fluidd on port 80</li> </ul> Mainsail Fluidd <ul> <li> <p>Connect to printer over SSH (see  SSH Connection section).</p> </li> <li> <p>In the SSH command prompt window, start Kiauh by entering this command: </p> <pre><code>kiauh\n</code></pre> <p></p> </li> </ul>"},{"location":"web-interfaces/#keep-mainsail-and-install-fluidd-on-port-81","title":"Keep Mainsail and install Fluidd on port 81","text":"<ul> <li> <p>Enter 1 for Install menu \u2192 4 for Fluidd \u2192 Enter 81 for port number \u2192 Enter N to not install the recommended macros:</p> <p></p> <p>You can access to Mainsail with <code>http://xxx.xxx.xx.xxx/</code> (replacing xxx.xxx.xxx.xxx by your local IP address). You can access to Fluidd with <code>http://xxx.xxx.xxx.xxx:81/</code> (replacing xxx.xxx.xxx.xxx by your local IP address).</p> </li> </ul>"},{"location":"web-interfaces/#remove-mainsail-and-install-fluidd-on-port-80","title":"Remove Mainsail and install Fluidd on port 80","text":"<ul> <li> <p>Enter 3 for Remove menu \u2192 3 for Mainsail:</p> <p></p> </li> <li> <p>Enter B to go back \u2192 1 for Install menu \u2192 4 for Fluidd \u2192 Enter N to not install the recommended macros:</p> <p></p> <p>You can access to Fluidd with <code>http://xxx.xxx.xxx.xxx/</code> (replacing xxx.xxx.xxx.xxx by your local IP address).</p> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"xy-dimensions-calibration/","title":"XY Dimensions Calibration","text":"<p>This can be useful if the accuracy of your dimensions is not acceptable.</p> <ul> <li> <p>Download this calibration cube:  Calibration_Cube.stl</p> </li> <li> <p>Slice it and print it.</p> </li> <li> <p>Once printed, measure the X and Y dimensions. The ideal values \u200b\u200bof this model are: X=20mm / Y=20mm.</p> </li> <li> <p>If you notice a significant deviation in the measured dimensions, it will therefore be necessary to apply a correction:</p> <ul> <li> <p>Open your Web Interface:</p> </li> <li> <p>Run <code>CALIBRATION_RESET_XY_OFFSETS</code> macro to reset existing values:</p> <p></p> </li> <li> <p>Wait for Klipper to restart.</p> </li> <li> <p>If you notice a deviation in X,  click on the down arrow at the <code>CALIBRATION_X_OFFSET</code> macro:</p> <p></p> </li> <li> <p>Enter the value you measured in X (in millimeters) and click the <code>SEND</code>  button:</p> <p></p> </li> <li> <p>Wait for Klipper to restart.</p> </li> <li> <p>Correction is now applied for X axis in your <code>printer.cfg</code> file.</p> </li> <li> <p>If you notice a deviation in Y,  click on the down arrow at the <code>CALIBRATION_Y_OFFSET</code> macro:</p> <p></p> </li> <li> <p>Enter the value you measured in Y (in millimeters) and click the <code>SEND</code>  button:</p> <p></p> </li> <li> <p>Wait for Klipper to restart.</p> </li> <li> <p>Correction is now applied for Y axis in your <code>printer.cfg</code> file.</p> </li> <li> <p>You can reprint your model to see if the accuracy of your dimensions is now acceptable.</p> </li> </ul> </li> </ul> <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"},{"location":"youtube/","title":"YouTube","text":"<p>Here you can find  YouTube videos about FLSUN OS.</p> <p></p> ModBot JSTECH <p></p> <p>If you like my work, don't hesitate to support me by paying me a \ud83c\udf7a or a \u2615. Thank you \ud83d\ude42</p> <p></p>"}]}